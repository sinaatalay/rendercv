\newcommand{\AND}{\unskip
    \cleaders\copy\ANDbox\hskip\wd\ANDbox
    \ignorespaces
}
\newsavebox\ANDbox
\sbox\ANDbox{<<design.seperator_between_connections>>}

((* if not design.disable_last_updated_date *))
\placelastupdatedtext
((* endif *))
((* if cv.name is not none *))

((* if cv.photo is not none *))
$\vcenter{
    \hbox{
        \includegraphics[width=0.2\textwidth]{<<cv.photo.as_posix()>>}
    }
}%
\vcenter{
    \begin{minipage}{0.8\textwidth}\raggedleft
        \begin{header}
            \textbf{\fontsize{<<design.header_font_size>>}{<<design.header_font_size>>}\selectfont <<cv.name>>}

            \vspace{<<design.margins.header.vertical_between_name_and_connections>>}

            \normalsize
            ((* for connection in cv.connections *))
                ((* if design.use_icons_for_connections *))
            \mbox{((*- if connection["url"] -*))
                \hrefWithoutArrow{<<connection["url"]>>}{\color{black}{\footnotesize<<connection["latex_icon"]>>}\hspace*{0.13cm}<<connection["placeholder"]|escape_latex_characters>>}
                ((*- else -*))
                {\color{black}\footnotesize<<connection["latex_icon"]>>}\hspace*{0.13cm}<<connection["placeholder"]|escape_latex_characters>>
                ((*- endif -*))}%
                ((* else *))
            \mbox{((*- if connection["url"] -*))
                \hrefWithoutArrow{<<connection["url"]>>}{<<connection["clean_url"]|escape_latex_characters>>}
                ((*- else -*))
                <<connection["placeholder"]|escape_latex_characters>>
                ((*- endif -*))}%
                ((* endif *))
                ((* if not loop.last *))
            \kern <<design.margins.header.horizontal_between_connections|divide_length_by(2)>>%
            \AND%
            \kern <<design.margins.header.horizontal_between_connections|divide_length_by(2)>>%
                ((* endif *))
            ((* endfor *))
        \end{header}
    \end{minipage}
}$
\vspace{5pt}

((* else *))
\begin{header}
    \textbf{\fontsize{<<design.header_font_size>>}{<<design.header_font_size>>}\selectfont <<cv.name>>}

    \vspace{<<design.margins.header.vertical_between_name_and_connections>>}

    \normalsize
    ((* for connection in cv.connections *))
        ((* if design.use_icons_for_connections *))
    \mbox{((*- if connection["url"] -*))
        \hrefWithoutArrow{<<connection["url"]>>}{\color{black}{\footnotesize<<connection["latex_icon"]>>}\hspace*{0.13cm}<<connection["placeholder"]|escape_latex_characters>>}
        ((*- else -*))
        {\color{black}\footnotesize<<connection["latex_icon"]>>}\hspace*{0.13cm}<<connection["placeholder"]|escape_latex_characters>>
        ((*- endif -*))}%
        ((* else *))
    \mbox{((*- if connection["url"] -*))
        \hrefWithoutArrow{<<connection["url"]>>}{<<connection["clean_url"]|escape_latex_characters>>}
        ((*- else -*))
        <<connection["placeholder"]|escape_latex_characters>>
        ((*- endif -*))}%
        ((* endif *))
        ((* if not loop.last *))
    \kern <<design.margins.header.horizontal_between_connections|divide_length_by(2)>>%
    \AND%
    \kern <<design.margins.header.horizontal_between_connections|divide_length_by(2)>>%
        ((* endif *))
    ((* endfor *))
\end{header}
((* endif *))

\vspace{<<design.margins.header.bottom>> - <<design.margins.section_title.top>>}
((* endif *))